#######################################
#  Проект Online Store "Hop & Barley" #
#######################################
Это учебный проект, в котором нужно было трансформировать готовый статический HTML/CSS дизайн в
полноценное интернет-магазин приложение на Django.
Проект содержит:
- Веб-интерфейс (Django, шаблоны, сессии)
- REST API для внешних клиентов (DRF, JWT)
- Инфраструктуру: PostgreSQL, Docker
- Качество кода: типизация, линтеры, тесты, документация

Цель: показать понимание Django, DRF, работы с базой, архитектурных практик, качества кода и деплоя.

##########################
#       Как начать       #
##########################

1. Склонируйте репозиторий в рабочую директорию:
git clone https://github.com/ChelovechKo/project3-hopnbarley-store.git
2. Создайте файл .env (можно скопировать из .env.example)
3. Поднимите контейнеры
docker compose up --build -d
4. Примените миграции
docker compose exec backend python manage.py migrate
5. Создайте супер-пользователя
docker compose exec backend python manage.py createsuperuser
6. Загрузите фикстуры
docker compose exec backend python manage.py loaddata fixtures/initial_data.json
7. Перейдите по адресу http://127.0.0.1:8000/ на главную страницу
8. Админка: http://127.0.0.1:8000/admin/
9. Swagger: http://127.0.0.1:8000/api/docs/

##########################
#         Общее          #
##########################

Приведенный код представляет собой интернет-магазин на Django.
- Веб-интерфейс использует session-based аутентификацию.
- Внешние API используют JWT для авторизации.
- Для инфраструктуры используется PostgreSQL, всё поднимается через Docker Compose.
- В качестве менеджеров зависимостей используется poetry.


**В основной директории лежат файлы:**
 - README.md - текстовое описание проекта и из чего он состоит
 - .dockerignore — список файлов и директорий, которые не копируются в Docker-контейнер при сборке образа
 - .env.example — пример файла окружения с базовыми настройками проекта. Используется как шаблон для создания собственного файла .env с реальными данными
 - .gitignore — список файлов и директорий, которые не должны отслеживаться системой контроля версий Git
 - compose.yaml — конфигурация Docker Compose для запуска проекта. Определяет сервисы backend (Django) и db (PostgreSQL), их параметры, переменные окружения и том для хранения данных базы
 - Dockerfile — инструкция для сборки Docker-образа проекта, Устанавливает зависимости через Poetry, копирует исходный код и запускает Django-сервер на порту 8000
 - pyproject.toml — основной файл конфигурации Poetry. Определяет зависимости проекта, настройки сборки, типизацию (mypy) и параметры для инструментов разработки

 - config/ — Папка для основных конфигураций Django-проекта. Содержит настройки, маршруты и точки входа приложения
 - fixtures/ - Папка для набора JSON-файлов с начальными данными для базы данных Django.
 - media/  - Папка для медиа-файлов
 - static/ - Папка для хранения статических файлов CSS, JS, logo
 - templates/ - Папка для хранения HTML шаблонов страниц
 - tests/ - Папка с автотестами проекта
 - users/, orders/, products/ - Папки для приложений проекта

##########################
#      Спецификация      #
##########################
 
Online Store "Hop & Barley"

**1. Главная страница**

**Маршрут:** `/products/`
Функциональность:
- Список товаров с пагинацией
- Фильтрация по категории, диапазону цен
- Поиск по названию и описанию
- Сортировка (по цене, популярности, новизне)

**2. Страница товара**

- **Маршрут:** `/product/<slug>/`
Функциональность:
- Детальная информация (название, описание, цена, изображения, рейтинг)
- Отзывы с рейтингами (1–5)
- Кнопка "Добавить в корзину", выбор количества

**3. Корзина**

- **Маршрут:** `/cart/`
Функциональность:
- Просмотр содержимого корзины
- Добавление, удаление, изменение количества
- Подсчёт итоговой стоимости, учёт остатка
- Хранение в сессии
- Проверка наличия товара

**4. Оформление заказа**
- **Маршрут:** `/checkout/`
Функциональность:
- Форма для данных доставки/контакта
- Выбор способа оплаты
- Создание заказа
- Email-уведомления пользователю в консоль
- Обработка ошибок и валидация
	
**5. Личный кабинет**	
- **Маршрут:** `/account/`
Функциональность:
- Регистрация, вход/выход (session auth)
- История заказов + возможность оставить отзыв
- Редактирование профиля

**6. Админ-панель**

- **Маршрут:** `/admin/`
Функциональность:
- Управление товарами, категориями, заказами, отзывами, пользователями
- Поиск, фильтры, кастомные action’ы

**6. Документация**

- **Маршрут:** `/api/docs/`
Функциональность:
- Swagger для REST API
- Примеры запросов, схемы, авторизация

**7. REST API**

Ресурсы и действия (пример):

| Ресурс       | Действие          | URL-шаблон                    | HTTP метод(ы)            | Описание                               | Авторизация    |
|--------------|-------------------|-------------------------------|--------------------------|----------------------------------------|----------------|
| Товары       | Список            | `/api/products/`              | GET                      | Пагинация, фильтрация, поиск           | Необязательно  |
| Товары       | Деталь            | `/api/products/<id>/`         | GET                      | Информация о товаре                    | Необязательно  |
| Заказы       | Создание          | `/api/orders/`                | POST                     | Создание заказа (на основе корзины)    | JWT            |
| Заказы       | Список своих      | `/api/orders/`                | GET                      | Список заказов текущего пользователя   | JWT            |
| Заказы       | Деталь            | `/api/orders/<id>/`           | GET                      | Детальная информация (только свой)     | JWT            |
| Заказы       | Обновление/отмена | `/api/orders/<id>/`           | PATCH/PUT/DELETE         | Изменение статуса/отмена (по правилам) | JWT            |
| Пользователи | Регистрация       | `/api/users/register/`        | POST                     | Создать аккаунт                        | Нет            |
| Пользователи | Вход (JWT)        | `/api/users/login/`           | POST                     | Получить access/refresh токены         | Нет            |
| Корзина      | Управление        | `/api/cart/`                  | GET, POST, PATCH, DELETE | Содержимое корзины                     | JWT или сессия |
| Отзывы       | Добавить/просмотр | `/api/products/<id>/reviews/` | GET, POST                | Список и отправка отзыва               | JWT            |

**7. Линтеры**
Был использован mypy
Запуск - docker compose exec backend poetry run mypy .
Skipping virtualenv creation, as specified in config file.
Success: no issues found in 43 source files